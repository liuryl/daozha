C51 COMPILER V9.60.0.0   MQTT                                                              06/17/2022 15:00:09 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MQTT
OBJECT MODULE PLACED IN .\Objects\MQTT.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE MQTT.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\MQTT
                    -.lst) TABS(2) OBJECT(.\Objects\MQTT.obj)

line level    source

   1          #include "MQTT.h"
   2          #include "Uart.h"
   3          #include "delay.h"
   4          #include <REGX51.H>
   5          
   6          
   7          code char MQTT_Connect[]={ 
   8          0x10,0x7e,0x00,0x04,0x4d,0x51,0x54,0x54,0x04,0xc2,
   9          0x00,0x3c,0x00,0x33,0x2e,0x2e,0x2e,0x7c,0x73,0x65,
  10          0x63,0x75,0x72,0x65,0x6d,0x6f,0x64,0x65,0x3d,0x33,
  11          0x2c,0x73,0x69,0x67,0x6e,0x6d,0x65,0x74,0x68,0x6f,
  12          0x64,0x3d,0x68,0x6d,0x61,0x63,0x73,0x68,0x61,0x31,
  13          0x2c,0x74,0x69,0x6d,0x65,0x73,0x74,0x61,0x6d,0x70,
  14          0x3d,0x37,0x38,0x39,0x7c,0x00,0x13,0x64,0x61,0x6f,
  15          0x7a,0x68,0x61,0x31,0x26,0x67,0x65,0x79,0x6c,0x55,
  16          0x6b,0x7a,0x52,0x63,0x49,0x51,0x00,0x28,0x66,0x62,
  17          0x32,0x61,0x35,0x36,0x32,0x61,0x30,0x35,0x62,0x65,
  18          0x63,0x64,0x66,0x36,0x34,0x33,0x33,0x38,0x33,0x39,
  19          0x32,0x64,0x36,0x39,0x33,0x30,0x39,0x38,0x39,0x66,
  20          0x34,0x33,0x65,0x30,0x34,0x39,0x30,0x33,
  21          };
  22          //属性上报的报文：off人
  23          code  char MQTT_Post_Property_off[]={ 
  24          0x30,0x9b,0x01,0x00,0x32,0x2f,0x73,0x79,0x73,0x2f,
  25          0x67,0x65,0x79,0x6c,0x55,0x6b,0x7a,0x52,0x63,0x49,
  26          0x51,0x2f,0x64,0x61,0x6f,0x7a,0x68,0x61,0x31,0x2f,
  27          0x74,0x68,0x69,0x6e,0x67,0x2f,0x65,0x76,0x65,0x6e,
  28          0x74,0x2f,0x70,0x72,0x6f,0x70,0x65,0x72,0x74,0x79,
  29          0x2f,0x70,0x6f,0x73,0x74,0x7b,0x22,0x69,0x64,0x22,
  30          0x3a,0x22,0x31,0x32,0x33,0x34,0x35,0x36,0x37,0x38,
  31          0x39,0x22,0x2c,0x22,0x76,0x65,0x72,0x73,0x69,0x6f,
  32          0x6e,0x22,0x3a,0x22,0x31,0x2e,0x30,0x22,0x2c,0x22,
  33          0x70,0x61,0x72,0x61,0x6d,0x73,0x22,0x3a,0x7b,0x22,
  34          0x4d,0x6f,0x74,0x69,0x6f,0x6e,0x41,0x6c,0x61,0x72,
  35          0x6d,0x53,0x74,0x61,0x74,0x65,0x22,0x3a,0x31,0x7d,
  36          0x2c,0x22,0x6d,0x65,0x74,0x68,0x6f,0x64,0x22,0x3a,
  37          0x22,0x74,0x68,0x69,0x6e,0x67,0x2e,0x65,0x76,0x65,
  38          0x6e,0x74,0x2e,0x70,0x72,0x6f,0x70,0x65,0x72,0x74,
  39          0x79,0x2e,0x70,0x6f,0x73,0x74,0x22,0x7d,};
  40          
  41          
  42          code unsigned char MQTT_Heart[]={0xc0,0x00}; 
  43          
  44          char Init_MQTT(void){
  45   1            
  46   1        do{
  47   2          count = 0;
  48   2          Send_Str(MQTT_Connect,128);
  49   2          while(!count);
  50   2          DelayMs(50);    
  51   2        }while(count != 4 || buffers[0] != 0x20 );
  52   1        if(buffers[3] == 0x00){
  53   2          return 2;
  54   2        }
C51 COMPILER V9.60.0.0   MQTT                                                              06/17/2022 15:00:09 PAGE 2   

  55   1        return 0;
  56   1        
  57   1      }
  58          
  59          void MQTT_Publish_off(void){
  60   1      
  61   1          Send_Str(MQTT_Post_Property_off,158);
  62   1          //while(!count);
  63   1          DelayMs(50);  
  64   1      }
  65          
  66          void MQTT_Heart_send(void){
  67   1          Send_Str(MQTT_Heart,2);
  68   1          //while(!count);
  69   1          DelayMs(50);
  70   1      }
  71          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     77    ----
   CONSTANT SIZE    =    288    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
